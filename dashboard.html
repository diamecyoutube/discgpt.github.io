<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>discGPT | Pro Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #0b0e14; 
            color: #f3f4f6;
            scroll-behavior: smooth;
        }
        .console-font { font-family: 'JetBrains Mono', monospace; }
        
        .glass-panel { 
            background: rgba(30, 31, 34, 0.6); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(255,255,255,0.05); 
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #818cf8 0%, #c084fc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .server-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .server-card:hover {
            transform: translateY(-4px);
            background: rgba(45, 47, 54, 0.8);
            border-color: rgba(99, 102, 241, 0.3);
        }

        .setting-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.03);
        }

        .badge-plus { background: linear-gradient(135deg, #3b82f6, #2dd4bf); color: white; }
        .badge-unlimited { background: linear-gradient(135deg, #8b5cf6, #ec4899); color: white; }

        .terminal-box { background-color: #09090b; }
        .hide { display: none !important; }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        /* Custom Switch Styling */
        .switch { position: relative; display: inline-block; width: 44px; height: 22px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #6366f1; }
        input:checked + .slider:before { transform: translateX(22px); }
        input:disabled + .slider { opacity: 0.3; cursor: not-allowed; }
    </style>
</head>
<body class="min-h-screen">

    <!-- LOGIN SCREEN -->
    <div id="login-view" class="min-h-screen flex flex-col items-center justify-center px-6 fade-in">
        <div class="glass-panel p-10 rounded-[2.5rem] shadow-2xl text-center max-w-md w-full border border-white/10">
            <div class="mb-6 mx-auto h-20 w-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl flex items-center justify-center rotate-6 shadow-xl shadow-indigo-500/20">
                <span class="text-4xl font-black text-white">DG</span>
            </div>
            <h1 class="text-4xl font-black mb-2 tracking-tight">disc<span class="gradient-text">GPT</span></h1>
            <p class="text-gray-400 text-sm font-semibold uppercase tracking-widest mb-10">Neural Control Center</p>
            
            <div class="space-y-4">
                <input type="password" id="auth-key" placeholder="Enter Authentication Key" 
                    class="w-full bg-black/40 p-4 rounded-2xl outline-none border border-white/5 focus:border-indigo-500/50 transition text-center console-font text-lg">
                
                <button onclick="login()" id="login-btn"
                    class="w-full bg-white text-black py-4 rounded-2xl font-bold hover:bg-indigo-50 transition-all shadow-xl active:scale-95 text-lg">
                    Access Systems
                </button>
            </div>
            
            <p id="login-error" class="text-red-400 text-sm mt-6 hide font-bold px-4 py-2 bg-red-500/10 rounded-lg"></p>
            
            <div class="mt-10 pt-8 border-t border-white/5">
                <div class="flex items-center justify-center space-x-3">
                    <span id="ping-indicator" class="h-2.5 w-2.5 rounded-full bg-yellow-500 animate-pulse"></span>
                    <span id="ping-text" class="text-xs text-gray-500 font-bold uppercase tracking-widest">Verifying Satellite Link...</span>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN DASHBOARD -->
    <div id="dashboard-view" class="hide min-h-screen">
        <!-- Sidebar Navigation (Desktop) -->
        <aside class="fixed left-0 top-0 h-full w-20 lg:w-64 bg-black/20 border-r border-white/5 flex flex-col p-4 z-50">
            <div class="p-4 mb-8 hidden lg:block">
                <h2 class="text-xl font-black tracking-tighter">disc<span class="gradient-text">GPT</span></h2>
            </div>
            <nav class="flex-1 space-y-2">
                <button class="w-full flex items-center gap-3 p-3 rounded-xl bg-indigo-500/10 text-indigo-400 font-bold">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                    <span class="hidden lg:block">Home</span>
                </button>
                <button class="w-full flex items-center gap-3 p-3 rounded-xl text-gray-500 hover:bg-white/5 hover:text-white transition">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    <span class="hidden lg:block">Simulations</span>
                </button>
                <button class="w-full flex items-center gap-3 p-3 rounded-xl text-gray-500 hover:bg-white/5 hover:text-white transition">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span class="hidden lg:block">Plans</span>
                </button>
            </nav>
            <button onclick="location.reload()" class="flex items-center gap-3 p-3 rounded-xl text-red-500 hover:bg-red-500/10 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                <span class="hidden lg:block font-bold">Log out</span>
            </button>
        </aside>

        <!-- Main Content Area -->
        <main class="lg:ml-64 p-6 lg:p-12 fade-in">
            <header class="flex flex-col md:flex-row md:items-center justify-between gap-6 mb-12">
                <div>
                    <h1 class="text-3xl font-black flex items-center gap-3">
                        <span class="h-4 w-4 rounded-full bg-green-500 shadow-[0_0_15px_#22c55e]"></span>
                        Systems Online, <span id="display-name" class="gradient-text">User</span>
                    </h1>
                    <p class="text-gray-400 mt-2 font-medium">Manage your intelligent server cluster from one interface.</p>
                </div>
                <div class="flex items-center gap-3">
                    <span class="bg-indigo-500/10 text-indigo-400 text-xs font-bold px-3 py-1.5 rounded-full border border-indigo-500/20">API STABLE</span>
                    <span class="bg-purple-500/10 text-purple-400 text-xs font-bold px-3 py-1.5 rounded-full border border-purple-500/20">GLOBAL CLUSTER: US-WEST</span>
                </div>
            </header>

            <!-- Admin Section -->
            <div id="admin-panel" class="hide mb-10 glass-panel p-8 rounded-3xl border border-indigo-500/30">
                <h2 class="text-xs font-black text-indigo-400 uppercase tracking-[0.2em] mb-6 flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                    Root Authority Access
                </h2>
                <div class="flex flex-col lg:flex-row gap-4">
                    <input type="text" id="admin-gid" placeholder="Target Guild ID" class="flex-1 bg-black/50 p-4 rounded-2xl border border-white/5 outline-none focus:border-indigo-500/50 font-mono text-sm">
                    <select id="admin-tier" class="bg-black/50 p-4 rounded-2xl border border-white/5 outline-none font-bold text-sm cursor-pointer hover:bg-black/70">
                        <option value="Free">Tier: Free</option>
                        <option value="Plus">Tier: Plus (Llama)</option>
                        <option value="Unlimited">Tier: Unlimited (Gemini 3)</option>
                    </select>
                    <button onclick="updateServerTier()" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-4 px-8 rounded-2xl transition shadow-lg shadow-indigo-600/20 active:scale-95">
                        Overrule Tier Status
                    </button>
                </div>
                <p id="admin-msg" class="text-xs mt-4 font-bold"></p>
            </div>

            <!-- Server Selection -->
            <section class="mb-16">
                <h2 class="text-2xl font-black mb-6">Linked Nodes</h2>
                <div id="server-grid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                    <!-- Loaded via JS -->
                </div>
            </section>

            <!-- HOW IT WORKS SECTION -->
            <section class="mb-24">
                <div class="flex items-center gap-4 mb-8">
                    <h2 class="text-3xl font-black">Logic Flow Simulations</h2>
                    <div class="h-px flex-1 bg-white/5"></div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Logic Simulation Card 1 -->
                    <div class="glass-panel rounded-[2rem] overflow-hidden border border-white/5">
                        <div class="p-8 border-b border-white/5">
                            <h3 class="text-xl font-bold mb-2">Infinite Backup Chains</h3>
                            <p class="text-sm text-gray-400 leading-relaxed">Never see "Application did not respond". Our Unlimited plan utilizes a recursive failover chain: Gemini 3 → Llama-3 → Mistral.</p>
                        </div>
                        <div class="bg-black/40 p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-2">
                                    <span class="h-2 w-2 bg-red-500 rounded-full"></span>
                                    <span class="text-[10px] font-bold text-red-500 uppercase tracking-widest">Gemini Offline</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="h-2 w-2 bg-green-500 animate-pulse rounded-full"></span>
                                    <span class="text-[10px] font-bold text-green-500 uppercase tracking-widest">Llama Active</span>
                                </div>
                            </div>
                            <!-- Mock UI -->
                            <div class="rounded-xl bg-[#1e1f22] p-4 text-xs">
                                <div class="flex gap-3 mb-4">
                                    <div class="h-8 w-8 rounded-full bg-gray-600 shrink-0"></div>
                                    <div>
                                        <p class="font-bold text-white mb-1">User <span class="text-[9px] text-gray-500 font-medium ml-1">Today at 12:00</span></p>
                                        <p class="text-gray-300">Explain quantum entanglement in 1 sentence.</p>
                                    </div>
                                </div>
                                <div class="flex gap-3">
                                    <div class="h-8 w-8 rounded-lg bg-indigo-500 flex items-center justify-center shrink-0 font-black text-[10px]">dG</div>
                                    <div>
                                        <p class="font-bold text-white mb-1">discGPT <span class="bg-indigo-500 text-[8px] px-1 rounded ml-1">BOT</span></p>
                                        <p class="text-indigo-200">Quantum entanglement is a physical phenomenon where particles interact such that their state cannot be described independently, regardless of distance.</p>
                                        <p class="mt-2 text-[9px] text-indigo-400 font-bold italic opacity-70">Processed via Backup Model #1 (Llama-3)</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Logic Simulation Card 2 -->
                    <div class="glass-panel rounded-[2rem] overflow-hidden border border-white/5">
                        <div class="p-8 border-b border-white/5">
                            <h3 class="text-xl font-bold mb-2">Zero-Command Automation</h3>
                            <p class="text-sm text-gray-400 leading-relaxed">Turn your server into a living intelligent hub. Designate channels where the bot responds to every message without triggers.</p>
                        </div>
                        <div class="bg-black/40 p-6">
                            <div class="flex items-center gap-2 mb-4">
                                <span class="h-2 w-2 bg-indigo-500 rounded-full shadow-[0_0_8px_#6366f1]"></span>
                                <span class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest">#ai-zone (Auto-Reply Enabled)</span>
                            </div>
                            <div class="rounded-xl bg-[#1e1f22] p-4 text-xs">
                                <div class="flex gap-3 mb-4">
                                    <div class="h-8 w-8 rounded-full bg-blue-600 shrink-0"></div>
                                    <div>
                                        <p class="font-bold text-white mb-1">Member <span class="text-[9px] text-gray-500 font-medium ml-1">Today at 12:05</span></p>
                                        <p class="text-gray-300">"Anyone know a good coding tip?"</p>
                                    </div>
                                </div>
                                <div class="flex gap-3">
                                    <div class="h-8 w-8 rounded-lg bg-indigo-500 flex items-center justify-center shrink-0 font-black text-[10px]">dG</div>
                                    <div>
                                        <p class="font-bold text-white mb-1">discGPT <span class="bg-indigo-500 text-[8px] px-1 rounded ml-1">BOT</span></p>
                                        <p class="text-indigo-200">Always use clear, descriptive variable names. It's better to have <span class="text-white font-mono">totalUserCount</span> than just <span class="text-white font-mono">n</span>. Your future self will thank you!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PLANS & PRICING -->
            <section class="mb-24">
                <h2 class="text-3xl font-black mb-12 text-center">Engine Tiers</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Free -->
                    <div class="glass-panel p-8 rounded-[2.5rem] border border-white/5 flex flex-col">
                        <h4 class="text-lg font-bold mb-2">Free</h4>
                        <p class="text-gray-400 text-xs font-bold uppercase tracking-widest mb-6">Mistral Engine</p>
                        <div class="text-4xl font-black mb-8">$0 <span class="text-sm text-gray-500 font-medium">/mo</span></div>
                        <ul class="space-y-4 mb-10 flex-1 text-sm text-gray-400">
                            <li class="flex items-center gap-2">✓ Mistral Core</li>
                            <li class="flex items-center gap-2">✓ 0 Backups</li>
                            <li class="flex items-center gap-2">✓ Server Channels Only</li>
                        </ul>
                        <button class="w-full py-4 rounded-2xl bg-white/5 border border-white/10 font-bold hover:bg-white/10 transition">Select Free</button>
                    </div>
                    <!-- Plus -->
                    <div class="glass-panel p-8 rounded-[2.5rem] border-2 border-indigo-500/30 flex flex-col relative scale-105 shadow-2xl shadow-indigo-500/10">
                        <div class="absolute -top-4 left-1/2 -translate-x-1/2 bg-indigo-500 text-[10px] font-black uppercase px-4 py-1.5 rounded-full tracking-[0.2em]">Recommended</div>
                        <h4 class="text-lg font-bold mb-2">Plus</h4>
                        <p class="text-gray-400 text-xs font-bold uppercase tracking-widest mb-6">Llama Engine</p>
                        <div class="text-4xl font-black mb-8">Free <span class="text-sm text-gray-500 font-medium">(Request)</span></div>
                        <ul class="space-y-4 mb-10 flex-1 text-sm text-gray-300">
                            <li class="flex items-center gap-2 text-indigo-400 font-bold">✓ Llama Core</li>
                            <li class="flex items-center gap-2">✓ 1 Backup Failover</li>
                            <li class="flex items-center gap-2">✓ 5 DMs / Day</li>
                            <li class="flex items-center gap-2">✓ Priority Processing</li>
                        </ul>
                        <button class="w-full py-4 rounded-2xl bg-indigo-600 text-white font-bold hover:bg-indigo-500 transition shadow-lg shadow-indigo-600/30">Request Access</button>
                    </div>
                    <!-- Unlimited -->
                    <div class="glass-panel p-8 rounded-[2.5rem] border border-purple-500/30 flex flex-col">
                        <h4 class="text-lg font-bold mb-2">Unlimited</h4>
                        <p class="text-gray-400 text-xs font-bold uppercase tracking-widest mb-6">Gemini 3 Flash</p>
                        <div class="text-4xl font-black mb-8">Nitro <span class="text-sm text-gray-500 font-medium">Gift</span></div>
                        <ul class="space-y-4 mb-10 flex-1 text-sm text-gray-300">
                            <li class="flex items-center gap-2 text-purple-400 font-bold">✓ Gemini 3 Flash</li>
                            <li class="flex items-center gap-2">✓ ∞ Backup Chains</li>
                            <li class="flex items-center gap-2">✓ 15 DMs / Day</li>
                            <li class="flex items-center gap-2">✓ Zero-Command Logic</li>
                        </ul>
                        <button class="w-full py-4 rounded-2xl bg-purple-600 text-white font-bold hover:bg-purple-500 transition shadow-lg shadow-purple-600/30">GIFT NITRO</button>
                    </div>
                </div>
            </section>

            <!-- FEATURE MATRIX -->
            <section class="mb-24 overflow-x-auto">
                <h2 class="text-2xl font-black mb-8 text-center">Feature Matrix</h2>
                <table class="w-full text-left border-collapse min-w-[600px]">
                    <thead>
                        <tr class="border-b border-white/10 text-[10px] font-bold text-gray-500 uppercase tracking-widest">
                            <th class="py-4 px-6">Tier Features</th>
                            <th class="py-4 px-6 text-center">Free</th>
                            <th class="py-4 px-6 text-center">Plus</th>
                            <th class="py-4 px-6 text-center text-indigo-400">Unlimited</th>
                        </tr>
                    </thead>
                    <tbody class="text-sm">
                        <tr class="border-b border-white/5">
                            <td class="py-4 px-6 font-semibold">Auto-Reply Channels</td>
                            <td class="py-4 px-6 text-center">—</td>
                            <td class="py-4 px-6 text-center">—</td>
                            <td class="py-4 px-6 text-center text-indigo-400 font-black text-xl">✓</td>
                        </tr>
                        <tr class="border-b border-white/5">
                            <td class="py-4 px-6 font-semibold">Failover Backups</td>
                            <td class="py-4 px-6 text-center">0</td>
                            <td class="py-4 px-6 text-center">1</td>
                            <td class="py-4 px-6 text-center text-indigo-400 font-black text-xl">∞</td>
                        </tr>
                        <tr class="border-b border-white/5">
                            <td class="py-4 px-6 font-semibold">Private DM Limit</td>
                            <td class="py-4 px-6 text-center">0</td>
                            <td class="py-4 px-6 text-center">5</td>
                            <td class="py-4 px-6 text-center text-indigo-400 font-black text-xl">15</td>
                        </tr>
                        <tr class="border-b border-white/5">
                            <td class="py-4 px-6 font-semibold">Web Search / Vision</td>
                            <td class="py-4 px-6 text-center">—</td>
                            <td class="py-4 px-6 text-center text-indigo-400">✓</td>
                            <td class="py-4 px-6 text-center text-indigo-400 font-black text-xl">✓</td>
                        </tr>
                        <tr class="border-b border-white/5">
                            <td class="py-4 px-6 font-semibold">Response Priority</td>
                            <td class="py-4 px-6 text-center text-gray-500">Low</td>
                            <td class="py-4 px-6 text-center text-indigo-400">High</td>
                            <td class="py-4 px-6 text-center text-purple-400 font-bold">Ultra</td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </main>
    </div>

    <!-- SERVER SETTINGS MODAL/DASHBOARD -->
    <div id="settings-view" class="hide min-h-screen lg:ml-64 p-6 lg:p-12 fade-in">
        <header class="flex justify-between items-center mb-10 pb-6 border-b border-white/5">
            <div>
                <button onclick="exitSettings()" class="text-gray-400 hover:text-white flex items-center gap-2 mb-2 text-sm font-semibold transition">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                    Dashboard
                </button>
                <h1 id="settings-server-name" class="text-3xl font-black">Server Name</h1>
            </div>
            <div class="flex items-center gap-4">
                <button onclick="enterConsoleFromSettings()" class="bg-indigo-500/10 text-indigo-400 border border-indigo-500/30 px-6 py-3 rounded-2xl font-bold hover:bg-indigo-500/20 transition">Open Console</button>
                <button onclick="saveAllSettings()" class="bg-white text-black px-8 py-3 rounded-2xl font-black shadow-xl hover:bg-gray-200 active:scale-95 transition">Save Changes</button>
            </div>
        </header>

        <div class="grid grid-cols-1 xl:grid-cols-12 gap-10">
            <!-- Settings Navigation -->
            <div class="xl:col-span-3 space-y-2">
                <button onclick="switchTab('general')" class="tab-btn w-full text-left px-5 py-4 rounded-2xl font-bold bg-white/5 text-white transition">General Settings</button>
                <button onclick="switchTab('ai')" class="tab-btn w-full text-left px-5 py-4 rounded-2xl font-bold text-gray-500 hover:bg-white/5 transition">Neural Core (AI)</button>
                <button onclick="switchTab('moderation')" class="tab-btn w-full text-left px-5 py-4 rounded-2xl font-bold text-gray-500 hover:bg-white/5 transition">Mod Systems</button>
                <button onclick="switchTab('logs')" class="tab-btn w-full text-left px-5 py-4 rounded-2xl font-bold text-gray-500 hover:bg-white/5 transition">Logging / Webhooks</button>
                <button onclick="switchTab('plus')" class="tab-btn w-full text-left px-5 py-4 rounded-2xl font-bold text-yellow-500/70 hover:bg-white/5 transition flex items-center justify-between">
                    Plus/Unlimited
                    <span class="text-[10px] bg-yellow-500/10 px-2 py-0.5 rounded border border-yellow-500/20">PREMIUM</span>
                </button>
            </div>

            <!-- Settings Content -->
            <div id="settings-container" class="xl:col-span-9 space-y-6">
                <!-- Tabs will populate here -->
            </div>
        </div>
    </div>

    <!-- CONSOLE VIEW -->
    <div id="console-view" class="hide h-screen flex flex-col p-6 lg:ml-64 bg-black">
        <header class="flex justify-between items-center mb-6">
            <button onclick="exitConsoleToSettings()" class="text-gray-400 hover:text-white flex items-center gap-2 text-sm font-semibold">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                Back to Settings
            </button>
            <h2 id="active-server-name" class="font-black text-xl">Server Console</h2>
        </header>

        <div class="flex-1 terminal-box rounded-3xl border border-white/5 shadow-2xl flex flex-col overflow-hidden">
            <div class="bg-white/5 px-6 py-3 border-b border-white/5 flex items-center justify-between text-[10px] console-font text-gray-500 uppercase tracking-widest">
                <span>discGPT Secure SSH Terminal v4.0</span>
                <span id="term-status" class="text-green-500 font-bold">● Linked</span>
            </div>
            <div id="term-out" class="flex-1 p-6 overflow-y-auto console-font text-sm text-gray-400 space-y-2">
                <div class="text-indigo-400 font-bold">Node Initialized. Type 'help' for protocols.</div>
            </div>
            <div class="p-6 bg-black/40 border-t border-white/5 flex items-center gap-4">
                <span class="console-font text-indigo-400 font-black">$</span>
                <input type="text" id="term-in" class="flex-1 bg-transparent outline-none console-font text-white" 
                    placeholder="Input command sequence..." onkeydown="if(event.key==='Enter') executeCommand()">
            </div>
        </div>
    </div>

    <script>
        const BOT_URL = "http://fi13.bot-hosting.cloud:21187"; 
        const API_KEY = "bohNFcIumG0hWxp6E8l8b08nubQklL1GURibpKLtAVpUpslFzn";
        let sessionPass = "";
        let activeGuildId = null;
        let activeGuildTier = "Free";
        let currentTab = 'general';

        // Mock Settings Data Structure
        const SETTINGS_DEFAULTS = {
            general: [
                { id: 'prefix', label: 'Bot Prefix', type: 'text', val: '!', tier: 'Free' },
                { id: 'welcomer', label: 'Welcomer Messages', type: 'toggle', val: true, tier: 'Free' },
                { id: 'leave_msg', label: 'Leave Messages', type: 'toggle', val: false, tier: 'Free' },
                { id: 'nick_lock', label: 'Lock Bot Nickname', type: 'toggle', val: true, tier: 'Free' }
            ],
            ai: [
                { id: 'ai_chat', label: 'Enable AI Interaction', type: 'toggle', val: true, tier: 'Free' },
                { id: 'ai_mentions', label: 'Reply on @Mentions', type: 'toggle', val: true, tier: 'Free' },
                { id: 'ai_filter', label: 'SafeSearch AI Filter', type: 'toggle', val: true, tier: 'Free' },
                { id: 'ai_persona', label: 'Custom AI Persona', type: 'text', val: 'Helpful Assistant', tier: 'Plus' }
            ],
            moderation: [
                { id: 'mod_logs', label: 'Enable Mod Logs', type: 'toggle', val: true, tier: 'Free' },
                { id: 'anti_spam', label: 'Anti-Spam (Basic)', type: 'toggle', val: true, tier: 'Free' },
                { id: 'anti_link', label: 'Anti-Link System', type: 'toggle', val: false, tier: 'Plus' },
                { id: 'auto_ban', label: 'Auto-Ban Suspicious Accounts', type: 'toggle', val: false, tier: 'Unlimited' }
            ],
            logs: [
                { id: 'log_deleted', label: 'Log Deleted Messages', type: 'toggle', val: true, tier: 'Free' },
                { id: 'log_edited', label: 'Log Edited Messages', type: 'toggle', val: true, tier: 'Free' },
                { id: 'webhook_url', label: 'External Webhook URL', type: 'text', val: '', tier: 'Unlimited' }
            ],
            plus: [
                { id: 'vision', label: 'Image Vision Analysis', type: 'toggle', val: true, tier: 'Plus' },
                { id: 'web_search', label: 'Live Web Searching', type: 'toggle', val: true, tier: 'Plus' },
                { id: 'failover', label: 'Infinite Backup Chain', type: 'toggle', val: true, tier: 'Unlimited' },
                { id: 'auto_reply', label: 'Zero-Command (Channel-Wide)', type: 'toggle', val: true, tier: 'Unlimited' },
                { id: 'voice_ai', label: 'Voice Channel Integration', type: 'toggle', val: false, tier: 'Unlimited' }
            ]
        };

        // UI State Controllers
        async function login() {
            const key = document.getElementById('auth-key').value;
            const btn = document.getElementById('login-btn');
            const err = document.getElementById('login-error');
            
            if(!key) return;
            btn.innerText = "Connecting...";
            btn.disabled = true;

            try {
                const response = await fetch(`${BOT_URL}/auth?key=${API_KEY}&pass=${key}`);
                const data = await response.json();

                if (response.ok && !data.error) {
                    sessionPass = key;
                    document.getElementById('login-view').classList.add('hide');
                    document.getElementById('dashboard-view').classList.remove('hide');
                    document.getElementById('display-name').innerText = data.username || "Admin";
                    if(data.type === 'admin') document.getElementById('admin-panel').classList.remove('hide');
                    loadServers();
                } else throw new Error(data.error || "Bad Credentials");
            } catch(e) {
                err.innerText = e.message;
                err.classList.remove('hide');
            } finally {
                btn.innerText = "Access Systems";
                btn.disabled = false;
            }
        }

        async function loadServers() {
            const grid = document.getElementById('server-grid');
            grid.innerHTML = "<div class='col-span-3 text-center py-20 text-gray-500 font-bold animate-pulse'>SYNCHRONIZING CLUSTER NODES...</div>";
            
            try {
                const response = await fetch(`${BOT_URL}/guilds?key=${API_KEY}&pass=${sessionPass}`);
                const guilds = await response.json();
                
                grid.innerHTML = "";
                guilds.forEach(g => {
                    const card = document.createElement('div');
                    card.className = "glass-panel p-6 rounded-3xl server-card border border-white/5 cursor-pointer flex flex-col items-center text-center";
                    card.onclick = () => openServerSettings(g.id, g.name, g.tier);
                    card.innerHTML = `
                        <img src="${g.icon || 'https://cdn.discordapp.com/embed/avatars/0.png'}" class="w-20 h-20 rounded-2xl mb-4 bg-black border border-white/5 shadow-lg">
                        <h3 class="font-black text-xl mb-1">${g.name}</h3>
                        <span class="text-[10px] font-black uppercase tracking-widest py-1 px-3 rounded-full ${g.tier === 'Unlimited' ? 'badge-unlimited' : (g.tier === 'Plus' ? 'badge-plus' : 'bg-white/5 text-gray-500')}">${g.tier || 'Free'} Node</span>
                    `;
                    grid.appendChild(card);
                });
            } catch(e) { grid.innerHTML = "<p class='text-red-400'>Communication Link Interrupted.</p>"; }
        }

        function openServerSettings(id, name, tier) {
            activeGuildId = id;
            activeGuildTier = tier || "Free";
            document.getElementById('dashboard-view').classList.add('hide');
            document.getElementById('settings-view').classList.remove('hide');
            document.getElementById('settings-server-name').innerText = name;
            switchTab('general');
        }

        function exitSettings() {
            document.getElementById('settings-view').classList.add('hide');
            document.getElementById('dashboard-view').classList.remove('hide');
        }

        function switchTab(tabId) {
            currentTab = tabId;
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.classList.remove('bg-white/5', 'text-white');
                b.classList.add('text-gray-500');
            });
            event.currentTarget.classList.add('bg-white/5', 'text-white');
            event.currentTarget.classList.remove('text-gray-500');
            renderSettings();
        }

        function renderSettings() {
            const container = document.getElementById('settings-container');
            const items = SETTINGS_DEFAULTS[currentTab];
            container.innerHTML = `
                <div class="glass-panel rounded-3xl overflow-hidden border border-white/5">
                    <div class="p-6 border-b border-white/5 bg-white/5">
                        <h4 class="font-black uppercase tracking-widest text-xs">${currentTab} Settings Dashboard</h4>
                    </div>
                    <div id="settings-list"></div>
                </div>
            `;
            
            const list = document.getElementById('settings-list');
            items.forEach(s => {
                const isLocked = !checkTierAccess(s.tier);
                const row = document.createElement('div');
                row.className = `setting-row ${isLocked ? 'opacity-50' : ''}`;
                
                let inputHtml = "";
                if(s.type === 'toggle') {
                    inputHtml = `
                        <label class="switch">
                            <input type="checkbox" ${s.val ? 'checked' : ''} ${isLocked ? 'disabled' : ''}>
                            <span class="slider"></span>
                        </label>
                    `;
                } else {
                    inputHtml = `<input type="text" value="${s.val}" class="bg-black/40 border border-white/10 rounded-lg p-2 text-xs outline-none focus:border-indigo-500 w-48 text-right" ${isLocked ? 'disabled' : ''}>`;
                }

                row.innerHTML = `
                    <div>
                        <div class="font-bold text-sm flex items-center gap-2">
                            ${s.label}
                            ${s.tier !== 'Free' ? `<span class="text-[8px] font-black uppercase px-2 py-0.5 rounded ${s.tier === 'Unlimited' ? 'badge-unlimited' : 'badge-plus'}">${s.tier}</span>` : ''}
                        </div>
                        <p class="text-[10px] text-gray-500 mt-1">Configures specific behavior for this node module.</p>
                    </div>
                    <div>${inputHtml}</div>
                `;
                list.appendChild(row);
            });

            if(currentTab === 'plus' && activeGuildTier === 'Free') {
                container.innerHTML += `
                    <div class="p-8 glass-panel rounded-3xl border border-indigo-500/20 text-center">
                        <h4 class="text-xl font-black mb-2">Upgrade Node Capacity</h4>
                        <p class="text-gray-400 text-sm mb-6">This server is running on a Free Engine. Switch to Plus or Unlimited to unlock neural backups and vision analysis.</p>
                        <button class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold px-8 py-3 rounded-2xl transition">View Tier Plans</button>
                    </div>
                `;
            }
        }

        function checkTierAccess(requiredTier) {
            if(activeGuildTier === 'Unlimited') return true;
            if(activeGuildTier === 'Plus' && requiredTier !== 'Unlimited') return true;
            if(activeGuildTier === 'Free' && requiredTier === 'Free') return true;
            return false;
        }

        function saveAllSettings() {
            const btn = event.currentTarget;
            btn.innerText = "Syncing...";
            setTimeout(() => {
                btn.innerText = "Changes Saved";
                setTimeout(() => btn.innerText = "Save Changes", 2000);
            }, 800);
        }

        // --- CONSOLE ENGINE ---
        function enterConsoleFromSettings() {
            document.getElementById('settings-view').classList.add('hide');
            document.getElementById('console-view').classList.remove('hide');
            document.getElementById('active-server-name').innerText = document.getElementById('settings-server-name').innerText;
        }

        function exitConsoleToSettings() {
            document.getElementById('console-view').classList.add('hide');
            document.getElementById('settings-view').classList.remove('hide');
        }

        function tLog(text, type = "sys") {
            const out = document.getElementById('term-out');
            const div = document.createElement('div');
            const color = { sys: 'text-gray-500', exec: 'text-yellow-500', success: 'text-green-500', error: 'text-red-500' }[type];
            div.className = `${color} text-xs`;
            div.innerText = `[${new Date().toLocaleTimeString()}] ${text}`;
            out.appendChild(div);
            out.scrollTop = out.scrollHeight;
        }

        async function executeCommand() {
            const inp = document.getElementById('term-in');
            const val = inp.value.trim();
            if(!val) return;
            inp.value = "";

            if(val.toLowerCase() === 'help') {
                tLog("Fetching Protocol Commands...", "exec");
                const cmds = [
                    "--- ADMINISTRATION ---",
                    "ban <id> [reason] - Hard blacklist",
                    "kick <id>         - Sever connection",
                    "mute <id> <time>  - Protocol silence",
                    "warn <id>         - Increment infractions",
                    "purge <qty>       - Wiped log history",
                    "--- NEURAL CORE (AI) ---",
                    "ai-ban <id>       - Blacklist from AI usage",
                    "ai-reset          - Clear thread memory",
                    "ai-persona <text> - Set global behavior",
                    "ai-bypass <id>    - Ignore filters for user",
                    "ai-status         - Check cluster latency",
                    "--- UTILITY ---",
                    "userinfo <id>     - Deep scan account",
                    "serverinfo        - Node statistics",
                    "remind <time> <m> - Internal chronos",
                    "poll <q> \| <a>   - Consensus system",
                    "avatar <id>       - Retrieve asset data"
                ];
                cmds.forEach(c => tLog(c));
                return;
            }

            tLog(`> ${val}`, "exec");
            try {
                const response = await fetch(`${BOT_URL}/console/exec?key=${API_KEY}&pass=${sessionPass}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ cmd: val, guildId: activeGuildId })
                });
                const data = await response.json();
                if(data.success) tLog("SUCCESS: " + data.success, "success");
                else tLog("ERR: " + (data.error || "Execution Failed"), "error");
            } catch(e) { tLog("NETWORK_ERR: Remote node unreachable.", "error"); }
        }

        async function updateServerTier() {
            const gid = document.getElementById('admin-gid').value;
            const tier = document.getElementById('admin-tier').value;
            const msg = document.getElementById('admin-msg');
            if(!gid) return;
            try {
                const response = await fetch(`${BOT_URL}/admin/update_tier?key=${API_KEY}&pass=${sessionPass}&guild_id=${gid}&tier=${tier}`);
                const data = await response.json();
                if(data.success) {
                    msg.className = "text-xs mt-4 font-bold text-green-400";
                    msg.innerText = `SUCCESS: Guild ${gid} Overruled to ${tier}.`;
                    loadServers();
                } else throw new Error(data.error);
            } catch(e) {
                msg.className = "text-xs mt-4 font-bold text-red-400";
                msg.innerText = "Error: " + e.message;
            }
        }
    </script>
</body>
</html>
